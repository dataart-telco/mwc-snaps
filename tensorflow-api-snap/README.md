## Tensorflow API
REST API for tensorflow library with imagenet model.
### Build
Get the sources:
```
 git clone https://github.com/dataart-telco/mwc-snaps.git
 ```
Build the snap:
```
 cd tensorflow-api-snap
 snapcraft
```
### Install
To install snap:
```
 sudo snap install --dangerous --devmode tensorflow-api_1.00_amd64.snap
```
### Troubleshooting
- Мalidate that tensorflow-api snap installed:
```
 $ snap list
 tensorflow-api  1.00
```
- Сheck service status:
```
$ systemctl status snap.tensorflow-api.tensorflow-api-daemond.service
 snap.tensorflow-api.tensorflow-api-daemond.service - service tensorflow-api-daemond for snap tensorflow-api - autogenerated DO NO EDIT
   Loaded: loaded (/etc/systemd/system/snap.tensorflow-api.tensorflow-api-daemond.service; enabled; vendor preset: enabled)
   Active: active (running) since Sun 2017-02-12 02:50:27 PST; 23s ago
Main PID: 50678 (python2)
    Tasks: 1
   Memory: 297.1M
      CPU: 10.373s
   CGroup: /system.slice/snap.tensorflow-api.tensorflow-api-daemond.service
           └─50678 python2 /snap/tensorflow-api/100001/rest_api.py --api-key 123
 
 Feb 12 02:50:27 ubuntu systemd[1]: Started service tensorflow-api-daemond for snap tensorflow-api -  autogenerated DO NO EDIT.
 Feb 12 02:50:46 ubuntu ubuntu-core-launcher[50678]:  * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)
 ```
- See server logs
```
journalctl _PID=???
```
PID can be taken from service status command above.
- Validate that 5000 port is opened:
```
$ netstat --ntlp  | grep 5000
 Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
 tcp        0      0 0.0.0.0:5000            0.0.0.0:*               LISTEN      -
```
- Restart the service
```
sudo systemctl restart snap.tensorflow-api.tensorflow-api-daemond.service
```
